!function(t){var e=0;t.isSmartSidebar=function(e){return!!t(e).data("SmartSidebar")},t.SmartSidebar=function(n,o){function i(t){setTimeout(function(){s(),l(t)},10)}function s(){h=u.offset(),v=t('<div id="'+T+'" class="'+o.railClass+'" style="overflow:hidden;position:fixed;padding:1px;bottom:0;pointer-events:none;"></div>'),m=t('<div class="top-offset" style="margin:0;padding:0;pointer-events:none;"></div>'),g=t('<div class="bottom-offset" style="margin:0;padding:0;pointer-events:none;"></div>'),S=t('<div class="bottom-gap" style="margin:0;padding:0;pointer-events:none;"></div>'),v.css({left:h.left+"px"}),u.before(v),b=Math.max(h.top-parseInt(v.css("top")),0),m.css({height:b+"px"}),v.append(m),v.append(u),v.append(g),v.append(S)}function r(){v.replaceWith(u)}function a(){if(v){if(!c())return p.off("scroll",a);a.lastScrollTop=a.lastScrollTop||0;var t=g.height(),e=p.scrollTop(),n=e-a.lastScrollTop,i=v.scrollTop()+n;a.lastScrollTop=e,b>i&&(i=b>e?e:b);var s=!o.saveBottomOffset&&d.height()-p.height()-e>t;s?(g.hide(),S.css({height:v.height()-u.outerHeight(!0)+"px"})):(g.show(),S.css({height:v.height()-u.outerHeight(!0)-t+"px"})),v.scrollTop(i)}}function l(t){t=t||0,t>=0&&c()&&(a(),setTimeout(function(){l(t-1)},100))}function c(){return t("#"+T).length}function f(t,e){function n(r){r===s?(t.apply(i,o),s=0):setTimeout(function(){n(s)},e)}var o,i,s=0;return function(){s++,o=Array.prototype.slice.call(arguments),i=this,1===s&&n(0)}}o=o||{},o.railClass=(o.railClass?o.railClass+" ":"")+"sidebar-rail",o.saveBottomOffset=!!o.saveBottomOffset;var p=t(window),d=t(window.document.body),u=t(n);u.data("SmartSidebar",!0).css({"pointer-events":"all"});var h,v,m,g,S,b,T="ssr"+ ++e;i(50),p.on("scroll",a),p.on("resize",f(function(){r(),i(1)},500))},t.fn.smartSidebar=function(e){return this.each(function(){return t.SmartSidebar(this,e)})}}(jQuery);